var API_URL="https://liquidity-net.saphyteapi.com",CONTACT_EMAIL="contact@liquidity.net";!function(e,r){if("function"==typeof define&&define.amd)define(["exports","jquery"],function(e,t){return r(e,t)});else if("undefined"!=typeof exports){var t=require("jquery");r(exports,t)}else r(e,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,r){function t(e,t){function i(e,r,t){return e[r]=t,e}function n(e){return void 0===l[e]&&(l[e]=0),l[e]++}function o(e){switch(r('[name="'+e.name+'"]',t).attr("type")){case"checkbox":return"on"===e.value||e.value;default:return e.value}}function s(){return f}var f={},l={};this.addPair=function(r){if(!a.validate.test(r.name))return this;var t=function(e,r){for(var t,o=e.match(a.key);void 0!==(t=o.pop());)a.push.test(t)?r=i([],n(e.replace(/\[\]$/,"")),r):a.fixed.test(t)?r=i([],t,r):a.named.test(t)&&(r=i({},t,r));return r}(r.name,o(r));return f=e.extend(!0,f,t),this},this.addPairs=function(r){if(!e.isArray(r))throw new Error("formSerializer.addPairs expects an Array");for(var t=0,a=r.length;a>t;t++)this.addPair(r[t]);return this},this.serialize=s,this.serializeJSON=function(){return JSON.stringify(s())}}var a={validate:/^[a-z_][a-z0-9_]*(?:\[(?:\d*|[a-z0-9_]+)\])*$/i,key:/[a-z0-9_]+|(?=\[\])/gi,push:/^$/,fixed:/^\d+$/,named:/^[a-z0-9_]+$/i};return t.patterns=a,t.serializeObject=function(){return new t(r,this).addPairs(this.serializeArray()).serialize()},t.serializeJSON=function(){return new t(r,this).addPairs(this.serializeArray()).serializeJSON()},void 0!==r.fn&&(r.fn.serializeObject=t.serializeObject,r.fn.serializeJSON=t.serializeJSON),e.FormSerializer=t,t}),$("document").ready(function(){var e=function(){var e=function(e){""!=e&&"?"==e.charAt(0)&&(e=e.substr(1));for(var r=e.split("&"),t={},a=0;a<r.length;a++){var i=r[a].split("="),n=decodeURIComponent(i[0]),o=decodeURIComponent(i[1]);if(void 0===t[n])t[n]=decodeURIComponent(o);else if("string"==typeof t[n]){var s=[t[n],decodeURIComponent(o)];t[n]=s}else t[n].push(decodeURIComponent(o))}return t}(location.search),r=null;if(["rid","r"].forEach(function(t){!r&&e[t]&&/^[0-9a-f]{24}$/i.exec(e[t])&&(r=e[t])}),r&&localStorage&&localStorage.setItem("ref",r),!r){var t=localStorage.getItem("ref");/^[0-9a-f]{24}$/i.exec(t)&&(r=t)}return r},r=function(e,r){e.find(".form-msg").length?e.find(".form-msg").text(r):e.prepend('<div class="form-msg">'+r+"</div>")},t={};$("form").on("submit",function(a){var i=$(this),n=!!i.data("debug");a.preventDefault(),n&&console.log("Submit form",this);var o=i.data("id");if(o){if(n&&console.log("Form ID "+o),t[o])return;t[o]=!0;var s=i.serializeObject();if(s.full_name){var f=s.full_name.split(" ");s.first_name=(f[0]||"").trim(),s.last_name=(f[1]||"").trim()}var l,c={form:o,data:s},u=e();if(u&&(c.referred_by=u),n&&console.log("Post data",c),"multipart/form-data"==i.attr("enctype")||i.find('[type="file"]').length){const e=new FormData;i.find('[type="file"]').each(function(){var r=$(this).attr("name");r&&this.files&&this.files[0]&&e.append(r,this.files[0])}),e.append("form",c.form),c.referred_by&&e.append("referred_by",c.referred_by),Object.keys(c.data).forEach(function(r){e.append("data["+r+"]",c.data[r])}),n&&console.log("postData",c),n&&console.log("formData",e),l=$.ajax({url:API_URL+"/form/submit",type:"POST",data:e,processData:!1,contentType:!1})}else l=$.post(API_URL+"/form/submit",c);var d=i.data("msg-success")||"Thanks for your interest, we will be in contact with you as soon as possible!",m=i.data("msg-error")||"There was a problem handling your request, please try again later.<br/>Email us at "+CONTACT_EMAIL,p=i.data("redirect-url"),h=!!i.data("custom-events");l.done(function(e){if(n&&console.log("Done, response:",e),i.trigger("form:response",[e]),null!=e&&"object"==typeof e)if("ok"==e.status)if(p&&p.length)location.href=p;else if(h)i.trigger("form:success",[e]);else{var t=i.parent();i.prev(".form-header").fadeOut(),i.fadeOut("slow",function(){i.remove(),setTimeout(function(){t.append('<div class="form-success">'+d+"</div>")},200)})}else e.errors?h?i.trigger("form:fail",[e]):r(i,Object.keys(e.errors).map(function(r){return e.errors[r]}).join(", ")):h?i.trigger("form:fail",[e]):r(i,m);else h?i.trigger("form:fail",[e]):r(i,m)}),l.fail(function(e){n&&console.log("Fail, response:",e),h?i.trigger("form:fail",[e]):r(i,m)}),l.always(function(){t[o]=!1})}else n&&console.log("No form present, doing nothing.")}),e()});
